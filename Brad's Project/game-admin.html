<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animal Health Pro: Advanced Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .game-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .main-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            flex: 1;
            min-width: 800px;
            overflow: hidden;
        }

        .sidebar {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 350px;
            padding: 30px;
            height: fit-content;
        }

        .game-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .game-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .game-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .game-header p {
            font-size: 1.1em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .game-content {
            padding: 40px;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
            animation: fadeInSlide 0.5s;
        }

        @keyframes fadeInSlide {
            from { 
                opacity: 0; 
                transform: translateY(30px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }

        /* Character Profile */
        .character-profile {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            margin-right: 15px;
        }

        .profile-info h3 {
            color: #333;
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .profile-level {
            color: #667eea;
            font-weight: bold;
        }

        .xp-bar {
            background: #e5e7eb;
            height: 25px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
        }

        .xp-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .stat-item {
            background: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.8em;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
        }

        /* Achievements */
        .achievements-section {
            margin-bottom: 20px;
        }

        .achievements-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .achievement-badge {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            transition: all 0.3s;
        }

        .achievement-badge.unlocked {
            border-color: #fbbf24;
            background: #fffbeb;
        }

        .achievement-badge.locked {
            opacity: 0.5;
        }

        .achievement-icon {
            font-size: 2em;
            margin-right: 10px;
        }

        .achievement-info {
            flex: 1;
        }

        .achievement-name {
            font-weight: bold;
            color: #333;
            font-size: 0.9em;
        }

        .achievement-desc {
            font-size: 0.75em;
            color: #666;
        }

        /* Leaderboard */
        .leaderboard-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .leaderboard-entry {
            background: white;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .leaderboard-entry.current-player {
            background: #eef2ff;
            border: 2px solid #667eea;
        }

        .leaderboard-rank {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
            margin-right: 10px;
        }

        .leaderboard-name {
            flex: 1;
            font-weight: bold;
            color: #333;
        }

        .leaderboard-score {
            font-weight: bold;
            color: #667eea;
        }

        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
        }

        .welcome-screen h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .welcome-screen p {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: #f9fafb;
            padding: 20px;
            border-radius: 10px;
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .feature-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .feature-desc {
            color: #666;
            font-size: 0.9em;
        }

        .player-name-input {
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            width: 100%;
            max-width: 400px;
            margin: 20px auto;
            text-align: center;
        }

        .difficulty-selection {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .difficulty-btn {
            padding: 20px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            min-width: 150px;
        }

        .difficulty-btn.easy {
            background: #4ade80;
            color: white;
        }

        .difficulty-btn.medium {
            background: #fbbf24;
            color: white;
        }

        .difficulty-btn.hard {
            background: #f87171;
            color: white;
        }

        .difficulty-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        /* Game Screen */
        .game-status-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            gap: 15px;
            flex-wrap: wrap;
        }

        .status-card {
            background: #f3f4f6;
            padding: 15px 25px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            min-width: 120px;
        }

        .status-label {
            display: block;
            color: #666;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .status-value {
            display: block;
            color: #333;
            font-size: 1.5em;
            font-weight: bold;
        }

        .progress-bar {
            height: 10px;
            background: #e5e7eb;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s;
        }

        .case-file {
            background: #f9fafb;
            border-left: 5px solid #667eea;
            padding: 25px;
            margin-bottom: 30px;
            border-radius: 10px;
        }

        .case-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }

        .case-title {
            color: #333;
            font-size: 1.8em;
            font-weight: bold;
        }

        .case-badge {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .case-metadata {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .metadata-item {
            display: flex;
            align-items: center;
            color: #666;
            font-size: 0.9em;
        }

        .metadata-icon {
            margin-right: 5px;
        }

        .case-step-indicator {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .step-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e5e7eb;
            transition: all 0.3s;
        }

        .step-dot.completed {
            background: #4ade80;
        }

        .step-dot.current {
            background: #667eea;
            transform: scale(1.3);
        }

        .case-text {
            color: #333;
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 25px;
        }

        .choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .choice-btn {
            background: white;
            border: 2px solid #e5e7eb;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-size: 1em;
            color: #333;
            position: relative;
        }

        .choice-btn:hover {
            border-color: #667eea;
            background: #f3f4f6;
            transform: translateX(5px);
        }

        .choice-btn.selected {
            border-color: #667eea;
            background: #eef2ff;
        }

        .choice-btn.correct {
            border-color: #4ade80;
            background: #f0fdf4;
            animation: correctPulse 0.5s;
        }

        .choice-btn.incorrect {
            border-color: #f87171;
            background: #fef2f2;
            animation: shake 0.5s;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .choice-impact {
            font-size: 0.85em;
            color: #667eea;
            margin-top: 8px;
            font-style: italic;
        }

        .feedback-section {
            margin-top: 20px;
            padding: 25px;
            border-radius: 10px;
            display: none;
        }

        .feedback-section.show {
            display: block;
            animation: fadeInSlide 0.5s;
        }

        .feedback-section.correct {
            background: #f0fdf4;
            border: 2px solid #4ade80;
        }

        .feedback-section.incorrect {
            background: #fef2f2;
            border: 2px solid #f87171;
        }

        .feedback-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .feedback-title {
            font-size: 1.3em;
            font-weight: bold;
        }

        .feedback-section.correct .feedback-title {
            color: #16a34a;
        }

        .feedback-section.incorrect .feedback-title {
            color: #dc2626;
        }

        .xp-gained {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            animation: bounceIn 0.5s;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .feedback-text {
            color: #333;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .branching-info {
            background: rgba(102, 126, 234, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            margin-top: 15px;
        }

        .branching-info strong {
            color: #667eea;
        }

        .next-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .next-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        /* Results Screen */
        .results-screen {
            text-align: center;
        }

        .results-header {
            margin-bottom: 40px;
        }

        .results-screen h2 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .level-up-badge {
            display: inline-block;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.3em;
            font-weight: bold;
            margin: 20px 0;
            animation: bounceIn 0.8s;
        }

        .results-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .result-card {
            background: #f9fafb;
            padding: 30px;
            border-radius: 15px;
        }

        .result-card-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .result-card-label {
            color: #666;
            margin-bottom: 10px;
        }

        .result-card-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .performance-message {
            font-size: 1.2em;
            color: #666;
            margin: 30px 0;
        }

        .unlocked-achievements {
            background: #fffbeb;
            border: 2px solid #fbbf24;
            padding: 20px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .unlocked-achievements h3 {
            color: #333;
            margin-bottom: 15px;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .btn-primary {
            background: #667eea;
            color: white;
            border: none;
            padding: 20px 50px;
            border-radius: 10px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            padding: 20px 50px;
            border-radius: 10px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            background: #f3f4f6;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .game-wrapper {
                flex-direction: column;
            }
            
            .main-container {
                min-width: auto;
            }
            
            .sidebar {
                width: 100%;
            }
        }

        /* Certification Mini Badges */
        .cert-mini-badge {
            width: 60px;
            height: 60px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .cert-mini-badge:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="game-wrapper">
        <!-- Main Game Container -->
        <div class="main-container">
            <div class="game-header">
                <h1>üêæ Animal Health Pro</h1>
                <p>Advanced Career Simulation & Learning Platform</p>
                <div style="position: absolute; top: 10px; right: 20px; background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 0.8em; z-index: 10;">
                    v2.1 Admin
                </div>
                <button onclick="showAdminLogin()" style="position: absolute; top: 10px; left: 20px; background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 0.8em; border: none; color: white; cursor: pointer; z-index: 10;">
                    üîß Admin
                </button>
            </div>

            <div class="game-content">
                <!-- Registration Screen -->
                <div id="registrationScreen" class="screen active">
                    <div class="welcome-screen">
                        <h2>Welcome to Animal Health Pro</h2>
                        <p style="margin-bottom: 40px;">
                            Please complete your professional profile to begin your journey.
                        </p>

                        <form id="registrationForm" style="max-width: 600px; margin: 0 auto; text-align: left;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">
                                        First Name <span style="color: #f87171;">*</span>
                                    </label>
                                    <input 
                                        type="text" 
                                        id="firstName" 
                                        required
                                        style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1em;"
                                    >
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">
                                        Last Name <span style="color: #f87171;">*</span>
                                    </label>
                                    <input 
                                        type="text" 
                                        id="lastName" 
                                        required
                                        style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1em;"
                                    >
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">
                                    Email Address <span style="color: #f87171;">*</span>
                                </label>
                                <input 
                                    type="email" 
                                    id="email" 
                                    required
                                    style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1em;"
                                >
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">
                                    Organization Name <span style="color: #f87171;">*</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="organization" 
                                    required
                                    style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1em;"
                                >
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">
                                    Professional Title <span style="color: #f87171;">*</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="professionalTitle" 
                                    required
                                    placeholder="e.g., Veterinarian, Vet Tech, Practice Manager"
                                    style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1em;"
                                >
                            </div>

                            <div style="margin-bottom: 20px;">
                                <label style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">
                                    City <span style="color: #f87171;">*</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="city" 
                                    required
                                    style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1em;"
                                >
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                <div>
                                    <label style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">
                                        State/Province <span style="color: #f87171;">*</span>
                                    </label>
                                    <input 
                                        type="text" 
                                        id="state" 
                                        required
                                        style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1em;"
                                    >
                                </div>
                                <div>
                                    <label style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">
                                        Country <span style="color: #f87171;">*</span>
                                    </label>
                                    <input 
                                        type="text" 
                                        id="country" 
                                        required
                                        style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1em;"
                                    >
                                </div>
                            </div>

                            <button 
                                type="submit" 
                                class="btn-primary" 
                                style="width: 100%; margin-top: 30px;"
                            >
                                Continue to Game ‚Üí
                            </button>
                        </form>

                        <p style="margin-top: 30px; color: #666; font-size: 0.9em;">
                            Already registered? Your progress will be automatically loaded.
                        </p>
                    </div>
                </div>

                <!-- Welcome Screen -->
                <div id="welcomeScreen" class="screen">
                    <div class="welcome-screen">
                        <h2>Welcome to Animal Health Pro: Advanced Edition</h2>
                        <p>
                            Experience a career-spanning journey through veterinary medicine. 
                            Your decisions shape your career path, unlock specializations, and affect future cases.
                        </p>

                        <div class="features-grid">
                            <div class="feature-card">
                                <div class="feature-icon">üéØ</div>
                                <div class="feature-title">Branching Stories</div>
                                <div class="feature-desc">Your choices matter and influence future scenarios</div>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">üìà</div>
                                <div class="feature-title">Level Up</div>
                                <div class="feature-desc">Gain XP, advance your career, unlock new abilities</div>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">üèÜ</div>
                                <div class="feature-title">Achievements</div>
                                <div class="feature-desc">Earn badges for mastering different specialties</div>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">üìÅ</div>
                                <div class="feature-title">Complex Cases</div>
                                <div class="feature-desc">Multi-step scenarios with evolving challenges</div>
                            </div>
                        </div>

                        <!-- Daily Challenge Card -->
                        <div id="dailyChallengeCard" style="max-width: 600px; margin: 40px auto 30px; background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%); border: 3px solid #fbbf24; border-radius: 15px; box-shadow: 0 10px 30px rgba(251, 191, 36, 0.3);">
                            <!-- Content populated by updateDailyChallengeDisplay() -->
                        </div>

                        <h3 style="color: #333; margin-top: 30px; margin-bottom: 20px;">Select Your Difficulty Level:</h3>
                        <div class="difficulty-selection">
                            <button class="difficulty-btn easy" onclick="startGame('easy')">
                                Easy<br>
                                <small>Foundation Level</small>
                            </button>
                            <button class="difficulty-btn medium" onclick="startGame('medium')">
                                Medium<br>
                                <small>Practitioner Level</small>
                            </button>
                            <button class="difficulty-btn hard" onclick="startGame('hard')">
                                Hard<br>
                                <small>Expert Level</small>
                            </button>
                        </div>

                        <div style="margin-top: 40px; text-align: center;">
                            <button 
                                onclick="createNewUser()" 
                                style="background: white; color: #667eea; border: 2px solid #667eea; padding: 12px 30px; border-radius: 10px; font-size: 1em; cursor: pointer; transition: all 0.3s;"
                                onmouseover="this.style.background='#f3f4f6'"
                                onmouseout="this.style.background='white'"
                            >
                                üë§ Create New User Account
                            </button>
                            <p style="color: #999; font-size: 0.85em; margin-top: 10px;">
                                Start fresh with a new profile
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Game Screen -->
                <div id="gameScreen" class="screen">
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                    </div>

                    <div class="game-status-bar">
                        <div class="status-card">
                            <span class="status-label">Case</span>
                            <span class="status-value" id="scenarioCounter">1/10</span>
                        </div>
                        <div class="status-card">
                            <span class="status-label">Score</span>
                            <span class="status-value" id="currentScore">0</span>
                        </div>
                        <div class="status-card">
                            <span class="status-label">Difficulty</span>
                            <span class="status-value" id="difficultyDisplay">-</span>
                        </div>
                    </div>

                    <div class="case-file">
                        <div class="case-header">
                            <div>
                                <div class="case-title" id="scenarioTitle">Case Title</div>
                                <div class="case-metadata">
                                    <div class="metadata-item">
                                        <span class="metadata-icon">üìã</span>
                                        <span id="scenarioCategory">Category</span>
                                    </div>
                                    <div class="metadata-item">
                                        <span class="metadata-icon">‚ö°</span>
                                        <span id="scenarioDifficulty">Difficulty</span>
                                    </div>
                                </div>
                            </div>
                            <div class="case-badge" id="caseType">Single Step</div>
                        </div>

                        <div id="stepIndicator" class="case-step-indicator" style="display: none;">
                            <!-- Steps will be added dynamically -->
                        </div>

                        <div class="case-text" id="scenarioText">
                            Scenario description will appear here...
                        </div>

                        <div id="choicesContainer" class="choices">
                            <!-- Choices will be dynamically inserted here -->
                        </div>

                        <div id="feedbackSection" class="feedback-section">
                            <div class="feedback-header">
                                <div class="feedback-title" id="feedbackTitle">Feedback Title</div>
                                <div class="xp-gained" id="xpGained">+0 XP</div>
                            </div>
                            <div class="feedback-text" id="feedbackText">Feedback text will appear here...</div>
                            <div id="branchingInfo" class="branching-info" style="display: none;">
                                <strong>‚ö†Ô∏è Career Impact:</strong> <span id="branchingText"></span>
                            </div>
                            <button class="next-btn" onclick="nextScenario()">
                                <span id="nextBtnText">Next Case ‚Üí</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Results Screen -->
                <div id="resultsScreen" class="screen">
                    <div class="results-screen">
                        <div class="results-header">
                            <h2>Session Complete! üéâ</h2>
                            <div id="levelUpBadge" style="display: none;">
                                <div class="level-up-badge">
                                    üåü Level Up! Now Level <span id="newLevel">2</span>
                                </div>
                            </div>
                        </div>

                        <div class="results-stats">
                            <div class="result-card">
                                <div class="result-card-icon">üéØ</div>
                                <div class="result-card-label">Final Score</div>
                                <div class="result-card-value">
                                    <span id="finalScore">0</span> / <span id="maxScore">0</span>
                                </div>
                            </div>
                            <div class="result-card">
                                <div class="result-card-icon">‚≠ê</div>
                                <div class="result-card-label">XP Earned</div>
                                <div class="result-card-value" id="xpEarned">0</div>
                            </div>
                            <div class="result-card">
                                <div class="result-card-icon">üí∞</div>
                                <div class="result-card-label">Coins Earned</div>
                                <div class="result-card-value" id="coinsEarned">0</div>
                            </div>
                            <div class="result-card">
                                <div class="result-card-icon">‚úÖ</div>
                                <div class="result-card-label">Accuracy</div>
                                <div class="result-card-value" id="accuracy">0%</div>
                            </div>
                        </div>

                        <!-- Daily Challenge Bonus Info -->
                        <div id="dailyBonusInfo" style="display: none; background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%); border: 3px solid #fbbf24; padding: 20px; border-radius: 15px; margin: 20px 0; text-align: center;">
                            <!-- Populated dynamically -->
                        </div>

                        <p class="performance-message" id="performanceMessage">Great job!</p>

                        <div id="unlockedCertifications" class="unlocked-achievements" style="display: none;">
                            <h3>üéì New Certifications Earned!</h3>
                            <div id="certificationsList"></div>
                        </div>

                        <div id="unlockedAchievements" class="unlocked-achievements" style="display: none;">
                            <h3>üèÜ New Achievements Unlocked!</h3>
                            <div id="achievementsList"></div>
                        </div>

                        <div class="action-buttons">
                            <button class="btn-primary" onclick="continueGame()">Continue Journey</button>
                            <button class="btn-secondary" onclick="viewLeaderboard()">View Leaderboard</button>
                            <button class="btn-secondary" onclick="createNewUser()">Create New User</button>
                        </div>
                    </div>
                </div>

                <!-- Tournaments Screen -->
                <div id="tournamentsScreen" class="screen">
                    <div style="padding: 20px;">
                        <h2 style="color: #333; margin-bottom: 20px;">üèÜ Active Tournaments</h2>
                        
                        <div id="activeTournamentsList">
                            <!-- Active tournaments will be populated here -->
                        </div>

                        <h3 style="color: #333; margin-top: 40px; margin-bottom: 15px;">üìú Past Tournaments</h3>
                        <div id="pastTournamentsList">
                            <!-- Past tournaments will be populated here -->
                        </div>

                        <button class="btn-secondary" onclick="showScreen('welcomeScreen')" style="margin-top: 30px;">
                            ‚Üê Back to Home
                        </button>
                    </div>
                </div>

                <!-- Tournament Detail Screen -->
                <div id="tournamentDetailScreen" class="screen">
                    <div style="padding: 20px;">
                        <div id="tournamentDetailContent">
                            <!-- Tournament detail will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Analytics Screen -->
                <div id="analyticsScreen" class="screen">
                    <div style="padding: 20px;">
                        <h2 style="color: #333; margin-bottom: 20px;">üìä Performance Analytics</h2>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
                            <div style="background: #f9fafb; padding: 20px; border-radius: 10px;">
                                <h3 style="color: #667eea; margin-bottom: 15px;">üéØ Category Performance</h3>
                                <div id="categoryPerformanceChart">
                                    <!-- Category performance bars -->
                                </div>
                            </div>

                            <div style="background: #f9fafb; padding: 20px; border-radius: 10px;">
                                <h3 style="color: #667eea; margin-bottom: 15px;">‚ö° Improvement Areas</h3>
                                <div id="improvementSuggestions">
                                    <!-- Suggestions will be populated here -->
                                </div>
                            </div>
                        </div>

                        <div style="background: #f9fafb; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                            <h3 style="color: #667eea; margin-bottom: 15px;">üìÖ Activity Heatmap (Last 30 Days)</h3>
                            <div id="activityHeatmap">
                                <!-- Heatmap will be populated here -->
                            </div>
                        </div>

                        <div style="background: #f9fafb; padding: 20px; border-radius: 10px;">
                            <h3 style="color: #667eea; margin-bottom: 15px;">üìà Personal Bests</h3>
                            <div id="personalBests">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                    <div style="background: white; padding: 15px; border-radius: 8px;">
                                        <div style="color: #999; font-size: 0.9em;">Highest Score</div>
                                        <div style="font-size: 2em; font-weight: bold; color: #667eea;" id="bestScore">0</div>
                                    </div>
                                    <div style="background: white; padding: 15px; border-radius: 8px;">
                                        <div style="color: #999; font-size: 0.9em;">Perfect Cases</div>
                                        <div style="font-size: 2em; font-weight: bold; color: #667eea;" id="bestPerfect">0</div>
                                    </div>
                                    <div style="background: white; padding: 15px; border-radius: 8px;">
                                        <div style="color: #999; font-size: 0.9em;">Longest Streak</div>
                                        <div style="font-size: 2em; font-weight: bold; color: #667eea;" id="bestStreak">0</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button class="btn-secondary" onclick="showScreen('welcomeScreen')" style="margin-top: 30px;">
                            ‚Üê Back to Home
                        </button>
                    </div>
                </div>

                <!-- Organization Screen -->
                <div id="organizationScreen" class="screen">
                    <div style="padding: 20px;">
                        <h2 style="color: #333; margin-bottom: 20px;">üè¢ Organization Rankings</h2>
                        
                        <div id="organizationLeaderboard">
                            <!-- Organization leaderboard will be populated here -->
                        </div>

                        <button class="btn-secondary" onclick="showScreen('welcomeScreen')" style="margin-top: 30px;">
                            ‚Üê Back to Home
                        </button>
                    </div>
                </div>

                <!-- Admin Login Screen -->
                <div id="adminLoginScreen" class="screen">
                    <div style="max-width: 400px; margin: 100px auto; padding: 40px; background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                        <h2 style="color: #333; margin-bottom: 20px; text-align: center;">üîß Admin Access</h2>
                        <form id="adminLoginForm" onsubmit="handleAdminLogin(event)">
                            <input 
                                type="email" 
                                id="adminEmail" 
                                placeholder="Admin Email Address" 
                                required
                                style="width: 100%; padding: 15px; margin-bottom: 15px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 1em;"
                            >
                            <input 
                                type="password" 
                                id="adminPassword" 
                                placeholder="Password" 
                                required
                                style="width: 100%; padding: 15px; margin-bottom: 20px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 1em;"
                            >
                            <button type="submit" class="btn-primary" style="width: 100%;">
                                Login to Admin Panel
                            </button>
                        </form>
                        <button onclick="showScreen('welcomeScreen')" class="btn-secondary" style="width: 100%; margin-top: 15px;">
                            Cancel
                        </button>
                    </div>
                </div>

                <!-- Admin Dashboard -->
                <div id="adminDashboard" class="screen">
                    <div style="padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                            <h2 style="color: #333;">üîß Admin Dashboard</h2>
                            <button onclick="logoutAdmin()" class="btn-secondary">Logout</button>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                            <div onclick="showScenarioManager()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 15px; cursor: pointer; color: white; transition: transform 0.3s;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                                <div style="font-size: 3em; margin-bottom: 10px;">üìù</div>
                                <h3 style="margin-bottom: 10px;">Scenario Manager</h3>
                                <p style="opacity: 0.9; font-size: 0.9em;">Add, edit, or delete cases</p>
                            </div>

                            <div onclick="showPlayerDataViewer()" style="background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%); padding: 30px; border-radius: 15px; cursor: pointer; color: white; transition: transform 0.3s;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                                <div style="font-size: 3em; margin-bottom: 10px;">üë•</div>
                                <h3 style="margin-bottom: 10px;">Player Data</h3>
                                <p style="opacity: 0.9; font-size: 0.9em;">View all player information</p>
                            </div>

                            <div onclick="showTournamentManager()" style="background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); padding: 30px; border-radius: 15px; cursor: pointer; color: white; transition: transform 0.3s;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                                <div style="font-size: 3em; margin-bottom: 10px;">üèÜ</div>
                                <h3 style="margin-bottom: 10px;">Tournament Manager</h3>
                                <p style="opacity: 0.9; font-size: 0.9em;">Manage competitive events</p>
                            </div>

                            <div onclick="showSettingsEditor()" style="background: linear-gradient(135deg, #ec4899 0%, #db2777 100%); padding: 30px; border-radius: 15px; cursor: pointer; color: white; transition: transform 0.3s;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                                <div style="font-size: 3em; margin-bottom: 10px;">‚öôÔ∏è</div>
                                <h3 style="margin-bottom: 10px;">Settings</h3>
                                <p style="opacity: 0.9; font-size: 0.9em;">Configure rewards & settings</p>
                            </div>
                        </div>

                        <div style="background: #f9fafb; padding: 20px; border-radius: 15px;">
                            <h3 style="color: #333; margin-bottom: 15px;">Quick Stats</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                <div style="background: white; padding: 15px; border-radius: 10px; text-align: center;">
                                    <div style="color: #999; font-size: 0.9em;">Total Scenarios</div>
                                    <div style="font-size: 2em; font-weight: bold; color: #667eea;" id="adminTotalScenarios">8</div>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 10px; text-align: center;">
                                    <div style="color: #999; font-size: 0.9em;">Total Players</div>
                                    <div style="font-size: 2em; font-weight: bold; color: #4ade80;" id="adminTotalPlayers">1</div>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 10px; text-align: center;">
                                    <div style="color: #999; font-size: 0.9em;">Active Tournaments</div>
                                    <div style="font-size: 2em; font-weight: bold; color: #fbbf24;" id="adminActiveTournaments">0</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scenario Manager Screen -->
                <div id="scenarioManagerScreen" class="screen">
                    <div style="padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 style="color: #333;">üìù Scenario Manager</h2>
                            <div>
                                <button onclick="showAddScenarioForm()" class="btn-primary" style="margin-right: 10px;">
                                    ‚ûï Add New Scenario
                                </button>
                                <button onclick="showScreen('adminDashboard')" class="btn-secondary">
                                    ‚Üê Back
                                </button>
                            </div>
                        </div>

                        <div id="scenariosList">
                            <!-- Scenarios will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Add/Edit Scenario Form -->
                <div id="scenarioFormScreen" class="screen">
                    <div style="padding: 20px; max-width: 800px; margin: 0 auto;">
                        <h2 style="color: #333; margin-bottom: 20px;" id="scenarioFormTitle">Add New Scenario</h2>
                        
                        <form id="scenarioForm" onsubmit="handleScenarioSubmit(event)" style="background: #f9fafb; padding: 30px; border-radius: 15px;">
                            <!-- Form fields will be populated by JavaScript -->
                        </form>

                        <button onclick="showScenarioManager()" class="btn-secondary" style="margin-top: 20px;">
                            Cancel
                        </button>
                    </div>
                </div>

                <!-- Player Data Viewer -->
                <div id="playerDataScreen" class="screen">
                    <div style="padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 style="color: #333;">üë• Player Data</h2>
                            <button onclick="showScreen('adminDashboard')" class="btn-secondary">
                                ‚Üê Back
                            </button>
                        </div>

                        <div id="playerDataList">
                            <!-- Player data will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Tournament Manager -->
                <div id="tournamentManagerScreen" class="screen">
                    <div style="padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 style="color: #333;">üèÜ Tournament Manager</h2>
                            <button onclick="showScreen('adminDashboard')" class="btn-secondary">
                                ‚Üê Back
                            </button>
                        </div>

                        <div id="tournamentManagerContent">
                            <!-- Tournament management will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Settings Editor -->
                <div id="settingsEditorScreen" class="screen">
                    <div style="padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 style="color: #333;">‚öôÔ∏è Settings Editor</h2>
                            <button onclick="showScreen('adminDashboard')" class="btn-secondary">
                                ‚Üê Back
                            </button>
                        </div>

                        <div id="settingsEditorContent">
                            <!-- Settings will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Share Modal -->
                <div id="shareModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 9999; align-items: center; justify-content: center;">
                    <div style="background: white; border-radius: 20px; padding: 40px; max-width: 500px; width: 90%; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
                        <h2 style="color: #333; margin-bottom: 20px;">üì± Share Your Achievement</h2>
                        
                        <div id="shareContent" style="background: #f9fafb; padding: 20px; border-radius: 10px; margin-bottom: 20px; white-space: pre-wrap; font-family: monospace; font-size: 0.9em;">
                            <!-- Share text will be populated here -->
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                            <button onclick="copyShareText()" style="background: #667eea; color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">
                                üìã Copy Text
                            </button>
                            <button onclick="downloadShareImage()" style="background: #f59e0b; color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">
                                üì± Download Image
                            </button>
                        </div>

                        <button onclick="closeShareModal()" style="width: 100%; background: white; color: #667eea; border: 2px solid #667eea; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <!-- Phase 2: Enhanced Navigation -->
            <div style="margin-bottom: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <button onclick="showScreen('tournamentsScreen'); loadTournaments();" style="padding: 12px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.9em;">
                    üèÜ Tournaments
                </button>
                <button onclick="showScreen('analyticsScreen'); loadAnalytics();" style="padding: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.9em;">
                    üìä Analytics
                </button>
                <button onclick="showScreen('organizationScreen'); loadOrganizations();" style="padding: 12px; background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.9em;">
                    üè¢ My Team
                </button>
                <button onclick="showShareModal('general')" style="padding: 12px; background: linear-gradient(135deg, #ec4899 0%, #db2777 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.9em;">
                    üì± Share
                </button>
            </div>

            <!-- Character Profile -->
            <div class="character-profile">
                <div class="profile-header">
                    <div class="profile-avatar">ü¶∏</div>
                    <div class="profile-info">
                        <h3 id="playerName">Veterinarian</h3>
                        <div class="profile-level">Level <span id="playerLevel">1</span></div>
                    </div>
                </div>

                <div class="xp-bar">
                    <div class="xp-fill" id="xpFill" style="width: 0%">
                        <span id="xpText">0 / 100 XP</span>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-label">üí∞ VetCoins</div>
                        <div class="stat-value" id="vetCoinsDisplay">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">üî• Streak</div>
                        <div class="stat-value"><span id="dailyStreakDisplay">0</span> days</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Cases Solved</div>
                        <div class="stat-value" id="casesSolved">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Total Score</div>
                        <div class="stat-value" id="totalScore">0</div>
                    </div>
                </div>

                <!-- Certification Badges Mini Display -->
                <div style="margin-top: 15px; padding: 15px; background: #f9fafb; border-radius: 10px;">
                    <div style="font-weight: bold; color: #333; margin-bottom: 10px; font-size: 0.9em;">üéì Top Certifications</div>
                    <div id="certificationBadges" style="display: flex; gap: 10px; justify-content: center;">
                        <!-- Certification badges will be added here -->
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                    <button 
                        onclick="viewPlayerProfile()" 
                        style="padding: 10px; background: white; border: 2px solid #667eea; color: #667eea; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.3s;"
                        onmouseover="this.style.background='#f3f4f6'"
                        onmouseout="this.style.background='white'"
                    >
                        View Profile
                    </button>
                    <button 
                        onclick="viewKnowledgeBase()" 
                        style="padding: 10px; background: white; border: 2px solid #f59e0b; color: #f59e0b; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.3s;"
                        onmouseover="this.style.background='#fffbeb'"
                        onmouseout="this.style.background='white'"
                    >
                        üìö Library
                    </button>
                </div>
            </div>

            <!-- Achievements -->
            <div class="achievements-section">
                <h3>üèÜ Achievements</h3>
                <div id="achievementBadges">
                    <!-- Achievement badges will be added dynamically -->
                </div>
            </div>

            <!-- Leaderboard -->
            <div class="leaderboard-section">
                <h3>üèÖ Top Veterinarians</h3>
                <div id="leaderboardList">
                    <!-- Leaderboard entries will be added dynamically -->
                </div>
            </div>
        </div>
    </div>

    <script src="game-admin.js"></script>
</body>
</html>
